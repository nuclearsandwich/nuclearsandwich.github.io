
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mad Ramblings of a Lunatic Hacker</title>
  <meta name="author" content="Steven! Ragnarök">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://blog.nuclearsandwich.com/blog/page/9/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Mad Ramblings of a Lunatic Hacker" type="application/atom+xml"/>
  

  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Mad Ramblings of a Lunatic Hacker</a></h1>
  
    <h2>An Exercise in Wit or Vanity</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="https://duckduckgo.com/" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:blog.nuclearsandwich.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/25/a-sane-configuration-setup-for-rack-applications-on-heroku/">A Sane Configuration Setup for Rack Applications on Heroku</a></h1>
    
    
      <p class="meta">




<time datetime="2011-06-25 09:05:00 -0700" pubdate  updated >Jun 25<span>th</span>, 2011</time>


</p>
    
  </header>


  <div class="entry-content"><p><strong><em>Update:</em></strong> The Github repo I linked at the end of this article was private
and I forgot to make it public. It is now, sorry. ~Steven!</p>

<p>Recently, Nowmov has started using <a href="http://heroku.com">Heroku</a> for application
deployment. In the past I&#8217;ve always been hesitant toward &#8220;hosted
solutions&#8221; but a combination of focusing my time and the flexibility and
power of Heroku&#8217;s Celadon Cedar stack has brought me into contact with
one such solution.</p>

<p>One of the first peculiarities/gotchas/side-effects of many of these
hosted solutions is that they don&#8217;t provide shell or ftp access. Nor can
you write to the file system from your application. This caused us some
interesting problems during the migration.</p>

<ol>
<li><p>Rails convention dictates that <code>config/settings.yml</code>,
<code>config/database.yml</code> and friends not be stored in source control and
that we should store template files instead so developers are aware of
setup specific configuration details. However, our inability to push
files not in source control to Heroku leaves us unable to use the
standard convention for configuration details. The way Heroku bypasses
this leads to the next hurdle.</p></li>
<li><p>The whole point of Heroku is that you don&#8217;t deal with IT, just your
code. This means that you don&#8217;t really care where your PostgreSQL
database is or what port you use to connect to your Redis instance. But
you still need to connect to those things! So what does Heroku do? They
give you environment variables. <code>heroku run 'echo $DATABASE_URL'</code>
returns a big long uri corresponding to your app&#8217;s database. With this
specific config variable, Heroku is kind enough to render a
<code>database.yml</code> from it using erb. But it only works ActiveRecord
compatible database.ymls, which is not all of them, believe it or not.
(I&#8217;m looking at you Sequel) Inspect your Heroku config variables by
running <code>heroku config</code> from an app directory. The amount of scary
looking crap in there might surprise you!</p></li>
</ol>


<p>You can even add your own config variables such as
<code>MR_FANCY_PANTS=the_worlds_best_pants</code> with
<code>heroku config:add MR_FANCY_PANTS=sad_deep_inside ARTIST="Jonathan
Coulton"</code> this command will expose both your variables to your code
using Ruby&#8217;s <code>ENV</code> hash.</p>

<p>In your code you&#8217;d get to it like this:</p>

<div><figure role=code> <div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="c1">#!ruby</span>
</div><div class='line'><span class="k">def</span> <span class="nf">controller_action</span>
</div><div class='line'>  <span class="k">if</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ARTIST&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&quot;Jonathan Coulton&quot;</span>
</div><div class='line'>    <span class="vi">@still_alive</span> <span class="o">=</span> <span class="kp">true</span>
</div><div class='line'>  <span class="k">end</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure></div>


<p>But then this also has to work locally! So you need to do somethig like
this:</p>

<div><figure role=code> <div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
</pre></td><td class='code' width='100%'><pre><code class='ruby'><div class='line'><span class="c1">#!ruby</span>
</div><div class='line'><span class="k">def</span> <span class="nf">controller_action</span>
</div><div class='line'>  <span class="k">if</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;ARTIST&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="no">SETTINGS</span><span class="o">[</span><span class="ss">:artist</span><span class="o">]</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Jonathan Coulton&quot;</span>
</div><div class='line'>    <span class="vi">@still_alive</span> <span class="o">=</span> <span class="kp">true</span>
</div><div class='line'>  <span class="k">end</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure></div>


<p>Alternatively, you could set up all these environment variables using a
rake or thor task before launching your app but who wants to deal with
that? My favorite solution to a problem is a coding solution.</p>

<p>And you have to do that <em>everywhere</em> you want to use a situation
specific configuration. I don&#8217;t know about you but that seems hacky,
error prone, and repetitive to me. Smelly code, in other words. In
working on my recent projects I&#8217;ve been studying a large number of small
Ruby applications. Mostly Sinatra but some in Rails and Padrino as well.
In all those apps, I never found a ubiquitously deployed solution for
the configuration situation in a Heroku-style environment so I left it
to simmer a few days and dealt with <code>ENV[:KEY] || SETTINGS['key']</code> all
over my app. Then, over too much cold brew coffee I came up with a
workable solution. While this is the very first time I&#8217;ve seen this
solution in a web application. It actually comes from messing around in
<code>irb</code> earlier in the week trying to alter prompt strings for vanity&#8217;s sake.</p>

<p>Everyone open <code>irb</code> right now! Just go to a terminal and do it! Got it? Okay</p>

<p><code>&gt; IRB.conf</code></p>

<p>You&#8217;ll see how this inspired my solution later on. Or perhaps I&#8217;m not as
brilliant as I think I am and it&#8217;s obvious to you already (<em>likely</em>).</p>

<p>So let&#8217;s say we&#8217;re working on a lightweight Sinatra application and we
know that it&#8217;ll start simple and grow in complexity later on. Since
we&#8217;re smart we&#8217;re going to namespace the whole thing under a module.
Namely <code>Saneconf</code> Our skeleton looks like this:</p>

<div><figure role=code><figcaption><span>Main Application File - app.rb </span></figcaption>
 <div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
</pre></td><td class='code' width='100%'><pre><code class='rb'><div class='line'><span class="c1">#!ruby</span>
</div><div class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span> <span class="c1"># Only needed for Ruby 1.8</span>
</div><div class='line'><span class="nb">require</span> <span class="s1">&#39;bundler&#39;</span>
</div><div class='line'><span class="c1"># After this line, I shouldn&#39;t even have to *think* about dependencies.</span>
</div><div class='line'><span class="no">Bundler</span><span class="o">.</span><span class="n">require</span>
</div><div class='line'>
</div><div class='line'><span class="c1"># This is the initilization file for the Saneconf API. All set up, library</span>
</div><div class='line'><span class="c1"># loading and application level settings are done here.</span>
</div><div class='line'><span class="k">module</span> <span class="nn">Saneconf</span>
</div><div class='line'>  <span class="c1"># If there&#39;s a better/safer way to do this generically do let me know.</span>
</div><div class='line'>  <span class="c1"># I haven&#39;t encountered a setup where this didn&#39;t work.</span>
</div><div class='line'>  <span class="k">def</span> <span class="nc">Saneconf</span><span class="o">.</span><span class="nf">root</span><span class="p">;</span> <span class="no">Dir</span><span class="o">.</span><span class="n">pwd</span><span class="p">;</span> <span class="k">end</span>
</div><div class='line'>
</div><div class='line'>  <span class="c1"># This one is important so we set it early and use a constant.</span>
</div><div class='line'>  <span class="c1"># Set Rack environment if not specified.</span>
</div><div class='line'>  <span class="no">RACK_ENV</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;RACK_ENV&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;development&quot;</span>
</div><div class='line'>
</div><div class='line'>  <span class="c1"># Create an accessor to a module attribute which defaults to a</span>
</div><div class='line'>  <span class="k">def</span> <span class="nc">Saneconf</span><span class="o">.</span><span class="nf">conf</span><span class="p">;</span> <span class="vi">@conf_hash</span> <span class="o">||=</span> <span class="no">Hash</span><span class="o">.</span><span class="n">new</span><span class="p">;</span> <span class="k">end</span>
</div><div class='line'>
</div><div class='line'>  <span class="c1"># Handles initialization and preprocessing of application settings be they</span>
</div><div class='line'>  <span class="c1"># from Heroku&#39;s Environment or a local `settings.yml`.</span>
</div><div class='line'>  <span class="n">require_relative</span> <span class="s1">&#39;config/setup.rb&#39;</span>
</div><div class='line'>
</div><div class='line'>  <span class="k">class</span> <span class="nc">App</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
</div><div class='line'>    <span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
</div><div class='line'>      <span class="s2">&quot;&lt;h1&gt;So nice to be sane again, eh? </span><span class="si">#{</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;ARTIST&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">?&lt;/h1&gt;&quot;</span>
</div><div class='line'>    <span class="k">end</span>
</div><div class='line'>  <span class="k">end</span>
</div><div class='line'><span class="k">end</span>
</div></code></pre></td></tr></table></div></figure></div>


<p>That looks cool and all, but what the hell is <code>config/setup.rb</code>? Answer: It&#8217;s
where the magic happens, let&#8217;s go take a look:</p>

<div><figure role=code><figcaption><span>The Magic Happens Here - config/setup.rb </span></figcaption>
 <div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
<span class='line'>18</span>
<span class='line'>19</span>
<span class='line'>20</span>
<span class='line'>21</span>
<span class='line'>22</span>
<span class='line'>23</span>
<span class='line'>24</span>
<span class='line'>25</span>
<span class='line'>26</span>
<span class='line'>27</span>
<span class='line'>28</span>
<span class='line'>29</span>
<span class='line'>30</span>
<span class='line'>31</span>
<span class='line'>32</span>
<span class='line'>33</span>
<span class='line'>34</span>
<span class='line'>35</span>
<span class='line'>36</span>
</pre></td><td class='code' width='100%'><pre><code class='rb'><div class='line'><span class="c1">#!ruby</span>
</div><div class='line'><span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span> <span class="s2">&quot;config/settings.yml&quot;</span>
</div><div class='line'>  <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">merge!</span><span class="p">(</span>
</div><div class='line'>    <span class="no">YAML</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;config/settings.yml&quot;</span><span class="p">)</span><span class="o">[</span><span class="no">Saneconf</span><span class="o">::</span><span class="no">RACK_ENV</span><span class="o">]</span><span class="p">)</span>
</div><div class='line'>    <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;RESQUE_SCHEDULE&#39;</span><span class="o">]</span> <span class="o">=</span>
</div><div class='line'>      <span class="no">YAML</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="s2">&quot;config/resque_schedule.yml&quot;</span><span class="p">)</span>
</div><div class='line'><span class="k">else</span>
</div><div class='line'>  <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">merge!</span><span class="p">(</span><span class="no">ENV</span><span class="p">)</span>
</div><div class='line'><span class="k">end</span>
</div><div class='line'>
</div><div class='line'><span class="n">db</span> <span class="o">=</span> <span class="no">URI</span> <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="o">]</span>
</div><div class='line'><span class="n">redis</span> <span class="o">=</span> <span class="no">URI</span> <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;REDISTOGO_URL&#39;</span><span class="o">]</span>
</div><div class='line'><span class="c1"># Parse Postgres connection settings.</span>
</div><div class='line'><span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;DATABASE&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
</div><div class='line'>  <span class="ss">:adapter</span> <span class="o">=&gt;</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">db</span><span class="o">.</span><span class="n">scheme</span><span class="si">}</span><span class="s2">ql&quot;</span><span class="p">,</span> <span class="c1"># Add a &#39;ql&#39; cause ActiveRecord is stupid.</span>
</div><div class='line'>  <span class="ss">:host</span> <span class="o">=&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:port</span> <span class="o">=&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">path</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">db</span><span class="o">.</span><span class="n">password</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="c1"># Parse Redis connection settings.</span>
</div><div class='line'><span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;REDIS&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
</div><div class='line'>  <span class="ss">:host</span> <span class="o">=&gt;</span> <span class="n">redis</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:port</span> <span class="o">=&gt;</span> <span class="n">redis</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">redis</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
</div><div class='line'>  <span class="ss">:db</span> <span class="o">=&gt;</span> <span class="n">redis</span><span class="o">.</span><span class="n">path</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span>
</div><div class='line'><span class="p">}</span>
</div><div class='line'>
</div><div class='line'><span class="c1"># Parse Resque Schedule YAML.</span>
</div><div class='line'><span class="k">if</span> <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;RESQUE_SCHEDULE&#39;</span><span class="o">].</span><span class="n">class</span> <span class="o">==</span> <span class="nb">String</span>
</div><div class='line'>  <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;RESQUE_SCHEDULE&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load</span> <span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">[</span><span class="s1">&#39;RESQUE_SCHEDULE&#39;</span><span class="o">]</span>
</div><div class='line'><span class="k">end</span>
</div><div class='line'>
</div><div class='line'><span class="no">Saneconf</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">freeze</span>
</div></code></pre></td></tr></table></div></figure></div>


<p>All this does is check for the existence of a <code>settings.yml</code> and load  it&#8217;s
values into our (currently) empty configuration hash using an  in-place
<code>#merge!</code>. The reason we do this is because we very  purposefully didn&#8217;t supply
a mutator <code>Saneconf.conf=</code> for our config  hash. We don&#8217;t <em>want</em> it to be
overwritten later on. For the moment  though we can change existing keys and add
new ones. Next we handle all  non-scalar configuration by parsing some of the
scalar ones into hashes.  Arrays or any other Ruby object could be placed in the
<code>conf</code> hash. It  just happens that Hashes are commonly used by libraries like
ActiveRecord and the Ruby Redis interface for initialization. The reason  I
expand those here and not in place at point-of-use is mostly personal
preference. All I ever want to see in the app is <code>conf['VARIABLE']</code> and  I
shouldn&#8217;t have to think about it and whatever I&#8217;m trying to accomplish  at that
point in our app. Lastly, we call <code>#freeze</code> on the conf hash.  This is a method
every Ruby object has which makes it immutable,  throwing an exception if an
attempt is made to change it. This way, any  of your fellow developers will know
that whatever they&#8217;re doing belongs  in your application initialization code and
not in the middle of your  important code.   Hopefully this proves helpful, the
example code is available on
<a href="https://github.com/nuclearsandwich/saneconf">GitHub</a>.</p>

<p>Good hunting, Steven!</p>
</div>
  
  


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</nav>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/10/28/there-are-10-types-of-tests-you-need-both-of-them/">There Are 10 Types of Tests. You Need Both of Them</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/09/14/less-than-three-rubys-method-lookup/">Less-Than-Three Ruby&#8217;s Method Lookup</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/09/09/who-i-am-and-where-i-am-going/">Who I Am and Where I Am Going</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/09/08/a-look-at-ruby-case-expressions/">A Look at Ruby Case Expressions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/09/03/switching-to-octopress/">Switching to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/31/why-you-shouldnt-use-factories-in-unit-level-tests-or-specs/">Why You Shouldn&#8217;t Use Factories in Unit-level Tests or Specs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/19/why-ruby-needs-heroes/">Why Ruby Needs Heroes</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/nuclearsandwich">@nuclearsandwich</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nuclearsandwich',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("_nuclearsammich", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/_nuclearsammich" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @_nuclearsammich</a>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:nuclearsandwich">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "nuclearsandwich"; //id target for pinboard list
  var pinboard_count = 5; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


  
</aside>

    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Steven! Ragnarök -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
